<div class="d-flex justify-content-between align-items-center mb-4">
  <h1><i class="bi bi-translate"></i> Translation: <span class="badge bg-primary"><%= @translation.language.upcase %></span></h1>
  <div>
    <%= link_to edit_translation_path(@translation), class: "btn btn-primary me-2" do %>
      <i class="bi bi-pencil"></i> Edit
    <% end %>
    <%= link_to translations_path, class: "btn btn-outline-secondary" do %>
      <i class="bi bi-arrow-left"></i> Back
    <% end %>
  </div>
</div>

<div class="row mb-4">
  <div class="col-md-4">
    <div class="card shadow-sm">
      <div class="card-body">
        <h6 class="text-muted">Language Code</h6>
        <h3><%= @translation.language.upcase %></h3>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="card shadow-sm">
      <div class="card-body">
        <h6 class="text-muted">Total Keys</h6>
        <h3><%= translation_key_count(@translation) %></h3>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="card shadow-sm">
      <div class="card-body">
        <h6 class="text-muted">Last Updated</h6>
        <p class="mb-0"><%= @translation.updated_at.strftime("%B %d, %Y at %I:%M %p") %></p>
      </div>
    </div>
  </div>
</div>

<% if @parsed_data.present? %>
  <div class="card shadow-sm mb-4">
    <div class="card-header bg-success text-white">
      <h5 class="mb-0"><i class="bi bi-translate"></i> Parsed Translation</h5>
    </div>
    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-striped table-hover">
          <thead>
            <tr>
              <th>Key</th>
              <th>Value</th>
            </tr>
          </thead>
          <tbody>
            <%= render_yaml_tree(@parsed_data) %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
<% else %>
  <div class="card shadow-sm mb-4">
    <div class="card-header bg-success text-white">
      <h5 class="mb-0"><i class="bi bi-translate"></i> Parsed Translation</h5>
    </div>
    <div class="card-body">
      <div class="text-center py-4">
        <p class="text-muted mb-0"><i class="bi bi-info-circle"></i> No translation keys found</p>
      </div>
    </div>
  </div>
<% end %>

<div class="mt-4">
  <div class="card shadow-sm border-danger">
    <div class="card-header bg-danger text-white">
      <h6 class="mb-0"><i class="bi bi-exclamation-triangle"></i> Danger Zone</h6>
    </div>
    <div class="card-body">
      <p class="card-text">Deleting this translation is permanent and cannot be undone.</p>
      <%= button_to translation_path(@translation), method: :delete, class: "btn btn-danger", data: { confirm: "Are you sure you want to delete the #{@translation.language.upcase} translation? This action cannot be undone." } do %>
        <i class="bi bi-trash"></i> Delete Translation
      <% end %>
    </div>
  </div>
</div>
